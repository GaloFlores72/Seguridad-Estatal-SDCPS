@model CapaModeloRBS.tbRespuestaLV

@{
    ViewBag.Title = "Formulario";
    Layout = "~/Views/Shared/_Layout.cshtml";
    int indexSubt = 0;   

}

<section class="content-header">
    <div class="container-fluid">
        <div class="row mb-2">
            <div class="col-sm-6">

            </div>
            <div class="col-sm-6">
                <ol class="breadcrumb float-sm-right">
                    <li class="breadcrumb-item"><a href="@Url.Action("Crear", "Planificacion")">Listas_Verificacones</a></li>
                    <li class="breadcrumb-item active">Formulario</li>
                </ol>
            </div>
        </div>
    </div><!-- /.container-fluid -->
</section>

<section class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        @using (Html.BeginForm("Formulario", "Planificacion", FormMethod.Post, new { id = "registerForm", enctype = "multipart/form-data", }))
                        {
                            @Html.HiddenFor(m => m.RespuestaID)
                            @Html.HiddenFor(m => m.ListaID)
                            @Html.HiddenFor(m => m.oOrganizacion.OrganizacionID)
                            @Html.HiddenFor(m => m.oOrganizacion.Nombre)
                            @Html.HiddenFor(m => m.OrganizacionID)
                            @Html.HiddenFor(m => m.UsuarioID)
                            <div class="row">
                                <div class="col-sm-12 col-md-12">
                                    <div class="color-palette-set text-center" style="background-color:#c2bebe">
                                        <div> <h5> SISTEMA REGIONAL DE COOPERACIÓN PARA LA VIGILANCIA DE LA SEGURIDAD OPERACIONAL</h5></div>
                                        <div><strong>@Model.oListaDeVerificacion.Nombre &nbsp; @Model.oListaDeVerificacion.Descripcion</strong></div>
                                    </div>
                                </div>
                                <div class="col-sm-12 col-md-12">
                                    <div class="card card-info">
                                        <div class="form-horizontal">
                                            <div class="card-body">
                                                <div class="form-group row">
                                                    <label for="OrganizacionID" class="col-sm-3 col-form-label col-form-label-sm">Nombre organización de mantenimiento:</label>
                                                    <div class="col-sm-9">
                                                        @Html.TextBoxFor(model => model.oOrganizacion.Nombre, new { @class = "form-control form-control-sm", @readonly = "readonly", autocomplete = "off", maxlength = "100" })
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="oOrganizaciones_Direccion" class="col-sm-3 col-form-label col-form-label-sm">Dirección:</label>
                                                    <div class="col-sm-9">
                                                        @Html.TextBoxFor(model => model.oOrganizacion.Direccion, new { @class = "form-control form-control-sm text-uppercase", @readonly = "readonly", autocomplete = "off", maxlength = "255" })
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="oOrganizaciones_GerenteResponsable" class="col-sm-3 col-form-label col-form-label-sm">Nombre gerente responsable:</label>
                                                    <div class="col-sm-9">
                                                        @Html.TextBoxFor(model => model.oOrganizacion.GerenteResponsable, new { @class = "form-control form-control-sm text-uppercase", @readonly = "readonly", autocomplete = "off", maxlength = "255" })
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="Certificado" class="col-sm-3 col-form-label col-form-label-sm">No. certificado OMA:</label>
                                                    <div class="col-sm-9">
                                                        @Html.TextBoxFor(model => model.Certificado, new { @class = "form-control form-control-sm text-uppercase", @readonly = "readonly", autocomplete = "off", maxlength = "60" })
                                                    </div>
                                                </div>

                                                <div class="form-group row">
                                                    <label for="FechaInicio" class="col-sm-3 col-form-label col-form-label-sm">Fecha inicio:</label>
                                                    <div class="col-sm-3">
                                                        @Html.TextBoxFor(model => model.FechaInicio, new { @class = "form-control form-control-sm ", @readonly = "readonly", autocomplete = "off", maxlength = "60" })
                                                    </div>
                                                    <label for="FechaFin" class="col-sm-1 col-form-label col-form-label-sm">Fecha Término:</label>
                                                    <div class="col-sm-3">
                                                        @Html.TextBoxFor(model => model.FechaFin, new { @class = "form-control form-control-sm ", @readonly = "readonly", autocomplete = "off", maxlength = "60" })
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="oOrganizaciones_Telefono" class="col-sm-3 col-form-label col-form-label-sm">Télefono:</label>
                                                    <div class="col-sm-9">
                                                        @Html.TextBoxFor(model => model.oOrganizacion.Telefono, new { @class = "form-control form-control-sm text-uppercase", autocomplete = "off", maxlength = "40" })
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="oOrganizaciones_Correo" class="col-sm-3 col-form-label col-form-label-sm">Correo electrónico:</label>
                                                    <div class="col-sm-9">
                                                        @Html.TextBoxFor(model => model.oOrganizacion.Correo, new { @class = "form-control form-control-sm", @type = "email", @readonly = "readonly", autocomplete = "off", maxlength = "100" })
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="UsuarioID" class="col-sm-3 col-form-label col-form-label-sm">Inspector responsable vigilancia:</label>
                                                    <div class="col-sm-9">
                                                        @Html.TextBoxFor(model => model.oUsuario.Nombres, new { @class = "form-control form-control-sm", autocomplete = "off", @readonly = "readonly", maxlength = "100" })
                                                    </div>
                                                </div>
                                                <div class="form-group row">
                                                    <label for="InspectoresResponsables" class="col-sm-3 col-form-label col-form-label-sm">Inspectores:</label>
                                                    <div class="col-sm-9">
                                                        @Html.TextBoxFor(model => model.InspectoresResponsables, new { @class = "form-control form-control-sm", @readonly = "readonly", autocomplete = "off", maxlength = "100" })
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-12 col-md-12">
                                    <div class="color-palette-set text-center" style="background-color:#628caa">
                                        <div>  <strong>@Model.oListaDeVerificacion.Nombre &nbsp; @Model.oListaDeVerificacion.Descripcion</strong></div>
                                    </div>
                                </div>
                                <div class="col-sm-12 col-md-12">
                                    <table id="tablaLV" class="table table-bordered table-hover table-sm" style="width:100%; font-size:12px">
                                        <thead>
                                            <tr class="text-center">
                                                <th style="display: none;">ID</th>
                                                <th class="col-sm-1">Referencia</th>
                                                <th class="col-sm-2">Pregunta del requisito</th>
                                                <th class="col-sm-1">Estado de cumplimiento del requisito</th>
                                                <th class="col-sm-3">Orientación para el examen de pruebas o evidencias</th>
                                                <th class="col-sm-1">Codificación /Código de peligro</th>
                                                <th class="col-sm-2">Estado de implementación / IdR</th>
                                                <th class="col-sm-2">Comentarios</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var itemst in Model.oListaDeVerificacion.oSubtitulos)
                                            {
                                                <tr>
                                                    <td colspan="8" class="text-center text-white" style="background-color:#628caa">
                                                        <strong>@itemst.Nombre.ToUpper()</strong>
                                                    </td>
                                                </tr>
                                                foreach (var itemP in itemst.oListaPreguntas)
                                                {
                                                    <tr>
                                                        <td style="display: none;">@Html.DisplayFor(modelItem => itemP.PreguntaID)</td>
                                                        <td rowspan="@itemP.oListaOrientaciones.Count()"><p class="text-center" style="font-size:11px"><strong>@itemP.Referencia</strong></p></td>
                                                        <td rowspan="@itemP.oListaOrientaciones.Count()"><p><strong>@itemP.Descripcion</strong></p></td>
                                                        <td rowspan="@itemP.oListaOrientaciones.Count()">@Html.DisplayFor(modelItem => itemP.Estado)</td>
                                                        <td>@itemP.oListaOrientaciones.First().Descripcion.TrimEnd()</td>
                                                        <td>@itemP.oListaOrientaciones.First().CodigoPeligro.TrimEnd()</td>
                                                        <td>
                                                            <select class="form-control  select2-danger color-selector" data-dropdown-css-class="select2-danger" style="width: 100%;">
                                                                <option value="0" selected="selected">Seleccionar</option>
                                                                @foreach (var itemEst in @itemP.oListaOrientaciones.First().oOrientacionesEstados)
                                                                {
                                                                    <option style="background-color:@itemEst.Color" value="@itemEst.Color">@itemEst.oEstadoDeImplementacion.Descripcion</option>
                                                                }
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <div class="btn-group">
                                                                <input type="text" class="form-control" id="observacion" name="observacion">
                                                                <button type="button" class="btn btn-default" onclick="modalConstataciones(@Model.RespuestaID)" data-toggle="tooltip" data-placement="left" title="Constantaciones"><img src="~/Content/imganes/procesoAutHabilita.png" style="width:20px" /></button>
                                                            </div>

                                                        </td>
                                                    </tr>
                                                    int indexO = 0;
                                                    foreach (var itemO in itemP.oListaOrientaciones)
                                                    {
                                                        if (indexO > 0)
                                                        {
                                                    <tr>
                                                        <td style="display: none;">@Html.DisplayFor(modelItem => itemO.PreguntaID)</td>
                                                        <td>@itemO.Descripcion.TrimEnd()</td>
                                                        <td>@itemO.CodigoPeligro.TrimEnd()</td>
                                                        <td>
                                                            <select class="form-control select2-danger color-selector" data-dropdown-css-class="select2-danger" style="width: 100%;">
                                                                <option value="0" selected="selected">Seleccionar</option>
                                                                @foreach (var itemEst in itemO.oOrientacionesEstados)
                                                                {
                                                                    <option style="background-color:@itemEst.Color" value="@itemEst.Color">@itemEst.oEstadoDeImplementacion.Descripcion</option>
                                                                }
                                                            </select>
                                                        </td>
                                                        <td>
                                                            <div class="btn-group">
                                                                <input type="text" class="form-control" id="observacion" name="observacion">
                                                                <button type="button" class="btn btn-default" onclick="modalConstataciones(@Model.RespuestaID)" data-toggle="tooltip" data-placement="left" title="Constantaciones"><img src="~/Content/imganes/procesoAutHabilita.png" style="width:20px" /></button>
                                                            </div>
                                                        </td>
                                                    </tr>

                                                        }

                                                        indexO++;
                                                    }

                                                }

                                            }


                                        </tbody>
                                    </table>
                                </div>
                            </div>




                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="modalConstataciones" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-scrollable">
            <div class="modal-content">
                <form enctype="multipart/form-data">
                    <div class="modal-header">
                        <h6 class="modal-title text-primary text-center">Constataciones</h6>
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body" style="font-size:14px">
                        <a class="btn btn-outline-success btn-sm" href="#" onclick="modalConstatacionNuevo()">Nuevo registro</a>
                        <div class="card-body">

                            <table id="dataTableConstatacion" class="table table-bordered table-hover table-sm">
                                <thead>
                                    <tr>
                                        <th>OID</th>
                                        <th>AREA</th>
                                        <th>FECHA</th>
                                        <th>DESCRIPCIÓN</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>1</td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>

                                </tbody>
                            </table>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-danger btn-sm" data-dismiss="modal"><img src="~/Content/imganes/cancel.png" style="width:25px" /> Salir</button>
                        </div>
                    </div>

                </form>
            </div>
        </div>
    </div>

    <div class="modal fade" id="modalConstatacion" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-scrollable">
            <div class="modal-content">
                <form enctype="multipart/form-data">
                    <div class="modal-header">
                        <h6 class="modal-title text-primary text-center">Constatación</h6>
                    </div>
                    <div class="modal-body" style="font-size:14px">
                        <div class="card-body">
                            <div class="form-horizontal">
                                <div class="form-group row">
                                    <label for="inputEmail3" class="col-sm-3 col-form-label">Area</label>
                                    <div class="col-sm-9">
                                        <select class="form-control form-control-sm select2 select2-danger" data-dropdown-css-class="select2-danger" style="width: 100%;">
                                            <option selected="selected">Seleccionar</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="inputEmail3" class="col-sm-3 col-form-label">Fecha</label>
                                    <div class="col-sm-9">
                                        <input type="date" class="form-control form-control-sm" id="inputFechaConstatacion">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="CheckboxInfraccion1" class="col-sm-3 col-form-label">Presenta infracción</label>
                                    <div class="col-sm-9">
                                        <div class="custom-control custom-checkbox">
                                            <input class="custom-control-input" type="checkbox" id="CheckboxInfraccion" value="option1">
                                            <label for="CheckboxInfraccion" class="custom-control-label"></label>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="CheckboxInfraccion1" class="col-sm-3 col-form-label">Descripción constatación</label>
                                    <div class="col-sm-9">
                                        <textarea class="form-control form-control-sm" rows="3" placeholder="Descripción constatación"></textarea>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="inputEvidenvia" class="col-sm-3 col-form-label">Evidencia</label>
                                    <div class="col-sm-4">
                                        <input type="text" class="form-control form-control-sm" id="inputEvidenvia">
                                    </div>
                                    <div class="custom-file col-sm-4">
                                        <input type="file" class="custom-file-input custom-select-sm" id="customFile">
                                        <label class="custom-file-label col-form-label-sm" for="customFile">Choose file</label>
                                    </div>
                                    <button class="btn btn-outline-primary btn-sm"> + </button>
                                </div>
                                <div class="form-group row">
                                    <div class="col-sm-12">
                                        <table id="tbEvidencia" class="table table-striped table-bordered table-sm nowrap compact" style="width:100%">
                                            <thead>
                                                <tr>
                                                    <th>Oid</th>
                                                    <th>Nombre</th>
                                                    <th></th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>1</td>
                                                    <td>Documento_prueba.pdf</td>
                                                    <td></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="CheckboxInfraccion1" class="col-sm-3 col-form-label">Afecta S.O</label>
                                    <div class="col-sm-9">
                                        <div class="custom-control custom-checkbox">
                                            <input class="custom-control-input" type="checkbox" id="CheckboxAfectaSO" value="option1">
                                            <label for="CheckboxAfectaSO" class="custom-control-label"></label>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="inputNotaAfectaSO" class="col-sm-3 col-form-label">Nota afecta S.O</label>
                                    <div class="col-sm-9">
                                        <input type="text" class="form-control form-control-sm" id="inputNotaAfectaSO">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-danger btn-sm col-sm-3" onclick='salirConstatacion()'><img src="~/Content/imganes/cancel.png" style="width:30px" /> Salir</button>
                            <button class='btn btn-primary btn-sm col-sm-3' type='button' id="btnGrabarAeronave" onclick='saveUser()'> <i><img src="~/Content/imganes/save.png" style="width:30px" />  Grabar</i> </button>

                        </div>
                    </div>

                </form>
            </div>
        </div>
    </div>
</section>



@section scripts{
    <script src="@Url.Content("~/Scripts/Views/Formulario_Crear.js")" type="text/javascript"></script>
}


